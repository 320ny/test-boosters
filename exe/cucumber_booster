#!/usr/bin/env ruby

require "test_boosters"

TestBoosters.run_cucumber_config

cli_options = TestBoosters::CliParser.parse
thread_index = cli_options[:index] - 1
cucumber_booster = TestBoosters::CucumberBooster.new(thread_index)
exit_status = cucumber_booster.run

report_path = cucumber_booster.report_path
TestBoosters::InsightsUploader.new.upload("cucumber", report_path)

exit(exit_status)
